import{u as B,s as P,o as H,p as oe,U as ne,q as re,a as F,b as V,r as K,e as q,j as ae,D as ce,t as ie,v as le,w as de,k as ue}from"./index.9ce0a29e.js";import{k as M,j as f,u as n,q as s,v as l,C as e,J as a,F as L,G as I,a1 as T,I as j,A as z,B as G,K as S,r as R,x as pe,y as J,z as U,L as O,_ as W,H as _e,a7 as ve}from"./@vuelidate.e7200945.js";import{_ as he}from"./AddToCartButton.vue_vue_type_script_setup_true_lang.8d4e28f4.js";import{m as ge}from"./markdown.ca29d445.js";import"./google-spreadsheet.016741c3.js";import"./maci.f28b6353.js";import"./@kleros/gtcr-encoder.75dc8b9f.js";const me=""+new URL("search.44e986dd.svg",import.meta.url).href,Q=o=>(z("data-v-517725ac"),o=o(),G(),o),fe={key:0,class:"get-prepared"},je=Q(()=>e("span",{"aria-label":"thinking face",class:"emoji"},"\u{1F914}",-1)),ye={class:"prep-title"},Ce={class:"prep-text"},$e={key:1,class:"get-prepared"},ke=Q(()=>e("span",{"aria-label":"hand",class:"emoji"},"\u{1F91A}",-1)),we={class:"prep-title"},be={class:"prep-text"},Ae={key:2,class:"get-prepared"},Re={key:1,"aria-label":"rocket",class:"emoji"},Ie={class:"prep-title"},Le={class:"prep-text"},Se=M({__name:"CallToActionCard",setup(o){const c=B(),{canUserReallocate:C,hasContributionPhaseEnded:d,currentRound:$}=P(c),k=H(),{currentUser:v}=P(k),u=f(()=>v.value&&v.value.brightId&&v.value.brightId.isVerified),w=f(()=>oe===ne.BRIGHT_ID&&$.value&&v.value?.isRegistered!==void 0&&!v.value.isRegistered),b=()=>{c.toggleShowCartPanel(!0)};return(i,_)=>n(C)?(s(),l("div",fe,[je,e("div",null,[e("h2",ye,a(i.$t("callToActionCard.h2_1")),1),e("p",Ce,a(i.$t("callToActionCard.p1")),1),e("div",{class:"btn-action",onClick:_[0]||(_[0]=g=>b())},a(i.$t("callToActionCard.div1")),1)])])):n(d)?(s(),l("div",$e,[ke,e("div",null,[e("h2",we,a(i.$t("callToActionCard.h2_2")),1),e("p",be,a(i.$t("callToActionCard.p2")),1)])])):n(w)?(s(),l("div",Ae,[n(u)?(s(),L(re,{key:0,isProjectCard:!0})):(s(),l("span",Re,"\u{1F680}")),e("div",null,[e("h2",Ie,a(i.$t("callToActionCard.h2_3")),1),e("p",Le,a(i.$t("callToActionCard.p3")),1)]),n(u)?(s(),L(F,{key:3,to:"/verify/connect",class:"btn-action"},{default:I(()=>[T(a(i.$t("callToActionCard.link2")),1)]),_:1})):(s(),L(F,{key:2,to:"/verify",class:"btn-action"},{default:I(()=>[T(a(i.$t("callToActionCard.link1")),1)]),_:1}))])):j("",!0)}});const Te=V(Se,[["__scopeId","data-v-517725ac"]]),Pe={class:"project-item"},De={class:"project-image"},Ue=["src","alt"],Fe={key:0,class:"tag"},Be={class:"project-info"},Ve={class:"project-name"},Me={class:"project-description"},Ee={class:"buttons"},Ne={class:"more-btn"},xe=M({__name:"ProjectListItem",props:{project:null,roundAddress:{default:""}},setup(o){const c=o,C=K(),d=B(),{isRoundContributionPhase:$,canUserReallocate:k,currentRoundAddress:v,categoryLocaleKey:u}=P(d);f(()=>ge.renderInline(c.project.description));const w=f(()=>typeof c.project.bannerImageUrl<"u"?c.project.bannerImageUrl:typeof c.project.imageUrl<"u"?c.project.imageUrl:null);f(()=>d.cart.findIndex(h=>h.id===c.project.id&&!h.isCleared)!==-1);const b=f(()=>(c.roundAddress||v.value,d.isCurrentRound(c.roundAddress))),i=f(()=>b.value&&($.value||k.value)),_=f(()=>C.name==="round"?{name:"round-project",params:{address:c.roundAddress,id:c.project.id}}:{name:"project",params:{id:c.project.id}});return(g,h)=>{const A=F,E=he;return s(),l("div",Pe,[e("div",null,[S(A,{to:n(_)},{default:I(()=>[e("div",De,[e("img",{src:n(w)||"",alt:o.project.name},null,8,Ue),o.project.category?(s(),l("div",Fe,a(g.$t(n(u)(o.project.category))),1)):j("",!0)])]),_:1},8,["to"]),e("div",Be,[e("div",Ve,[S(A,{to:n(_)},{default:I(()=>[T(a(o.project.name),1)]),_:1},8,["to"])]),S(A,{to:n(_)},{default:I(()=>[e("div",Me,a(o.project.tagline),1)]),_:1},8,["to"])])]),e("div",Ee,[n(i)?(s(),L(E,{key:0,project:o.project},null,8,["project"])):j("",!0),S(A,{to:n(_)},{default:I(()=>[e("button",Ne,a(g.$t("projectListItem.button1")),1)]),_:1},8,["to"])])])}}});const He=V(xe,[["__scopeId","data-v-4bc93645"]]),Ke=""+new URL("chevron-down.f00bd3ea.svg",import.meta.url).href,qe={class:"category-filter"},ze={class:"filter-text"},Ge={key:0},Je=["onClick"],Oe={key:0,class:"close",src:q},We=M({__name:"FilterDropdown",props:{categories:{default:()=>[]},selectedCategories:{default:()=>[]}},emits:["change"],setup(o,{emit:c}){const C=B(),d=R(!1);function $(){d.value=!d.value}function k(u){u.target.matches(".close")||(d.value=!1)}function v(u){c("change",u)}return(u,w)=>{const b=pe("click-outside");return J((s(),l("div",qe,[e("div",{class:"filter-btn",onClick:$},[e("span",ze,[T(a(u.$t("filter"))+" ",1),o.selectedCategories.length?(s(),l("span",Ge,"("+a(o.selectedCategories.length)+")",1)):j("",!0)]),e("img",{src:Ke,alt:"Down arrow",class:U({"filter-chevron-open":d.value})},null,2)]),e("div",{class:U(["selector-wrapper",{show:d.value}])},[(s(!0),l(O,null,W(o.categories,(i,_)=>(s(),l("div",{key:_,class:U({"category-btn":!0,"category-btn-selected":o.selectedCategories.includes(i)}),onClick:g=>v(i)},[T(a(u.$t(n(C).categoryLocaleKey(i)))+" ",1),o.selectedCategories.includes(i)?(s(),l("img",Oe)):j("",!0)],10,Je))),128))],2)])),[[b,k]])}}});const Qe=V(We,[["__scopeId","data-v-d6c72946"]]),X=o=>(z("data-v-8ea3b165"),o=o(),G(),o),Xe={key:1,class:"project-container"},Ye={class:"projects"},Ze={class:"header"},et={key:0,class:"project-search"},tt=X(()=>e("img",{src:me},null,-1)),st=["placeholder"],ot={key:1,class:"add-project"},nt=X(()=>e("div",{class:"hr"},null,-1)),rt={class:"project-list"},at={key:0,class:"empty-search"},ct=M({__name:"ProjectList",setup(o){const c=Math.random();function C(t,r){const p=Math.sin(t*r)*1e4;return p-Math.floor(p)}function d(t){for(let r=t.length-1;r>0;r--){const p=Math.floor(C(c,r)*(r+1));[t[r],t[p]]=[t[p],t[r]]}}const $=K(),k=B(),{currentRoundAddress:v,currentRound:u,showCartPanel:w,isRoundJoinPhase:b}=P(k),i=H(),{currentUser:_}=P(i),g=R([]),h=R(""),A=R(!0),E=R(["content","education","research","tooling","data"]),y=R([]),N=R(""),Y=f(()=>y.value.length===0?g.value:g.value.filter(t=>y.value.includes((t.category||"").toLowerCase())));_e(async()=>{try{N.value=$.params.address||v.value||await ae()||"";const t=await Z(N.value);await ee(t)}catch(t){console.error("Error loading projects",t)}A.value=!1});async function Z(t){let r="",p=0,m=ce.local().toSeconds();if(t){const D=await ie(t,u.value);D&&(r=D.recipientRegistryAddress,p=D.startTime.toSeconds(),m=D.votingDeadline.toSeconds())}return r||(r=await le(null)),{recipientRegistryAddress:r,startTime:p,votingDeadline:m}}async function ee(t){const p=(await de(t.recipientRegistryAddress,t.startTime,t.votingDeadline)).filter(m=>!m.isHidden&&!m.isLocked);d(p),g.value=p}const x=f(()=>Y.value.filter(t=>h.value?t.name.toLowerCase().includes(h.value.toLowerCase()):!0));function te(t){y.value.includes(t)?y.value=y.value.filter(r=>r!==t):y.value.push(t)}function se(){h.value=""}return(t,r)=>{const p=ue;return A.value?(s(),L(p,{key:0})):(s(),l("div",Xe,[e("div",Ye,[e("div",{class:U({title:!0,"title-with-cart-closed":!!n(_)&&!n(w),"title-with-cart-open":!!n(_)&&n(w)})},[e("div",Ze,[e("h2",null,a(t.$t("projectList.h2")),1)]),S(Qe,{categories:E.value,selectedCategories:y.value,onChange:te},null,8,["categories","selectedCategories"]),g.value.length>0?(s(),l("div",et,[tt,J(e("input",{"onUpdate:modelValue":r[0]||(r[0]=m=>h.value=m),class:"input",name:"search",placeholder:t.$t("projectList.input"),autocomplete:"on",onfocus:"this.value=''"},null,8,st),[[ve,h.value]]),h.value.length>0?(s(),l("img",{key:0,onClick:se,src:q,height:"20",class:"pointer"})):j("",!0)])):j("",!0),n(b)?(s(),l("div",ot,[S(F,{to:"/join",class:"btn-primary"},{default:I(()=>[T(a(t.$t("projectList.link1")),1)]),_:1})])):j("",!0),nt],2),e("div",rt,[!h.value&&y.value.length===0?(s(),L(Te,{key:0})):j("",!0),(s(!0),l(O,null,W(n(x),m=>(s(),L(He,{project:m,key:m.id,roundAddress:N.value},null,8,["project","roundAddress"]))),128))]),n(x).length==0?(s(),l("div",at,[e("div",null,a(t.$t("projectList.div1")),1)])):j("",!0)])]))}}});const ht=V(ct,[["__scopeId","data-v-8ea3b165"]]);export{ht as default};
