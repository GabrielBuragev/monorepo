import{au as le}from"./index.9ce0a29e.js";const Ie=Symbol(),K=Object.getPrototypeOf,z=new WeakMap,ce=e=>e&&(z.has(e)?z.get(e):K(e)===Object.prototype||K(e)===Array.prototype),Ee=e=>ce(e)&&e[Ie]||null,$=(e,t=!0)=>{z.set(e,t)},Q=e=>typeof e=="object"&&e!==null,P=new WeakMap,J=new WeakSet,de=(e=Object.is,t=(n,h)=>new Proxy(n,h),s=n=>Q(n)&&!J.has(n)&&(Array.isArray(n)||!(Symbol.iterator in n))&&!(n instanceof WeakMap)&&!(n instanceof WeakSet)&&!(n instanceof Error)&&!(n instanceof Number)&&!(n instanceof Date)&&!(n instanceof String)&&!(n instanceof RegExp)&&!(n instanceof ArrayBuffer),o=n=>{switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:throw n}},l=new WeakMap,I=(n,h,V=o)=>{const u=l.get(n);if(u?.[0]===h)return u[1];const m=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));return $(m,!0),l.set(n,[h,m]),Reflect.ownKeys(n).forEach(C=>{if(Object.getOwnPropertyDescriptor(m,C))return;const A=Reflect.get(n,C),f={value:A,enumerable:!0,configurable:!0};if(J.has(A))$(A,!1);else if(A instanceof Promise)delete f.value,f.get=()=>V(A);else if(P.has(A)){const[R,k]=P.get(A);f.value=I(R,k(),V)}Object.defineProperty(m,C,f)}),Object.preventExtensions(m)},T=new WeakMap,d=[1,1],U=n=>{if(!Q(n))throw new Error("object required");const h=T.get(n);if(h)return h;let V=d[0];const u=new Set,m=(a,r=++d[0])=>{V!==r&&(V=r,u.forEach(i=>i(a,r)))};let C=d[1];const A=(a=++d[1])=>(C!==a&&!u.size&&(C=a,R.forEach(([r])=>{const i=r[1](a);i>V&&(V=i)})),V),f=a=>(r,i)=>{const p=[...r];p[1]=[a,...p[1]],m(p,i)},R=new Map,k=(a,r)=>{if(u.size){const i=r[3](f(a));R.set(a,[r,i])}else R.set(a,[r])},X=a=>{var r;const i=R.get(a);i&&(R.delete(a),(r=i[1])==null||r.call(i))},re=a=>(u.add(a),u.size===1&&R.forEach(([i,p],D)=>{const M=i[3](f(D));R.set(D,[i,M])}),()=>{u.delete(a),u.size===0&&R.forEach(([i,p],D)=>{p&&(p(),R.set(D,[i]))})}),x=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n)),F=t(x,{deleteProperty(a,r){const i=Reflect.get(a,r);X(r);const p=Reflect.deleteProperty(a,r);return p&&m(["delete",[r],i]),p},set(a,r,i,p){const D=Reflect.has(a,r),M=Reflect.get(a,r,p);if(D&&(e(M,i)||T.has(i)&&e(M,T.get(i))))return!0;X(r),Q(i)&&(i=Ee(i)||i);let v=i;if(i instanceof Promise)i.then(W=>{i.status="fulfilled",i.value=W,m(["resolve",[r],W])}).catch(W=>{i.status="rejected",i.reason=W,m(["reject",[r],W])});else{!P.has(i)&&s(i)&&(v=U(i));const W=!J.has(v)&&P.get(v);W&&k(r,W)}return Reflect.set(a,r,v,p),m(["set",[r],i,M]),!0}});T.set(n,F);const ae=[x,A,I,re];return P.set(F,ae),Reflect.ownKeys(n).forEach(a=>{const r=Object.getOwnPropertyDescriptor(n,a);"value"in r&&(F[a]=n[a],delete r.value,delete r.writable),Object.defineProperty(x,a,r)}),F})=>[U,P,J,e,t,s,o,l,I,T,d],[_e]=de();function S(e={}){return _e(e)}function Y(e,t,s){const o=P.get(e);let l;const I=[],T=o[3];let d=!1;const n=T(h=>{if(I.push(h),s){t(I.splice(0));return}l||(l=Promise.resolve().then(()=>{l=void 0,d&&t(I.splice(0))}))});return d=!0,()=>{d=!1,n()}}function Te(e,t){const s=P.get(e),[o,l,I]=s;return I(o,l(),t)}const c=S({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),oe={state:c,subscribe(e){return Y(c,()=>e(c))},push(e,t){e!==c.view&&(c.view=e,t&&(c.data=t),c.history.push(e))},reset(e){c.view=e,c.history=[e]},replace(e){c.history.length>1&&(c.history[c.history.length-1]=e,c.view=e)},goBack(){if(c.history.length>1){c.history.pop();const[e]=c.history.slice(-1);c.view=e}},setData(e){c.data=e}},_={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return _.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const e=navigator.userAgent.toLowerCase();return _.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},isArray(e){return Array.isArray(e)&&e.length>0},formatNativeUrl(e,t,s){if(_.isHttpUrl(e))return this.formatUniversalUrl(e,t,s);let o=e;o.includes("://")||(o=e.replaceAll("/","").replaceAll(":",""),o=`${o}://`),o.endsWith("/")||(o=`${o}/`),this.setWalletConnectDeepLink(o,s);const l=encodeURIComponent(t);return`${o}wc?uri=${l}`},formatUniversalUrl(e,t,s){if(!_.isHttpUrl(e))return this.formatNativeUrl(e,t,s);let o=e;o.endsWith("/")||(o=`${o}/`),this.setWalletConnectDeepLink(o,s);const l=encodeURIComponent(t);return`${o}wc?uri=${l}`},async wait(e){return new Promise(t=>{setTimeout(t,e)})},openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(_.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(_.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(_.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(_.WCM_VERSION,"2.6.0")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=(e=oe.state.data)==null?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t}},pe=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),E=S({enabled:pe,userSessionId:"",events:[],connectedWalletId:void 0}),he={state:E,subscribe(e){return Y(E.events,()=>e(Te(E.events[E.events.length-1])))},initialize(){E.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(E.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){E.connectedWalletId=e},click(e){if(E.enabled){const t={type:"CLICK",name:e.name,userSessionId:E.userSessionId,timestamp:Date.now(),data:e};E.events.push(t)}},track(e){if(E.enabled){const t={type:"TRACK",name:e.name,userSessionId:E.userSessionId,timestamp:Date.now(),data:e};E.events.push(t)}},view(e){if(E.enabled){const t={type:"VIEW",name:e.name,userSessionId:E.userSessionId,timestamp:Date.now(),data:e};E.events.push(t)}}},b=S({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),N={state:b,subscribe(e){return Y(b,()=>e(b))},setChains(e){b.chains=e},setWalletConnectUri(e){b.walletConnectUri=e},setIsCustomDesktop(e){b.isCustomDesktop=e},setIsCustomMobile(e){b.isCustomMobile=e},setIsDataLoaded(e){b.isDataLoaded=e},setIsUiLoaded(e){b.isUiLoaded=e},setIsAuth(e){b.isAuth=e}},G=S({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),j={state:G,subscribe(e){return Y(G,()=>e(G))},setConfig(e){var t,s;he.initialize(),N.setChains(e.chains),N.setIsAuth(Boolean(e.enableAuthMode)),N.setIsCustomMobile(Boolean((t=e.mobileWallets)==null?void 0:t.length)),N.setIsCustomDesktop(Boolean((s=e.desktopWallets)==null?void 0:s.length)),_.setModalVersionInStorage(),Object.assign(G,e)}},B="https://explorer-api.walletconnect.com";async function Z(e,t){const s=new URL(e,B);return s.searchParams.append("projectId",j.state.projectId),Object.entries(t).forEach(([o,l])=>{l&&s.searchParams.append(o,String(l))}),(await fetch(s)).json()}const g={async getDesktopListings(e){return Z("/w3m/v1/getDesktopListings",e)},async getMobileListings(e){return Z("/w3m/v1/getMobileListings",e)},async getInjectedListings(e){return Z("/w3m/v1/getInjectedListings",e)},async getAllListings(e){return Z("/w3m/v1/getAllListings",e)},getWalletImageUrl(e){return`${B}/w3m/v1/getWalletImage/${e}?projectId=${j.state.projectId}`},getAssetImageUrl(e){return`${B}/w3m/v1/getAssetImage/${e}?projectId=${j.state.projectId}`}};var ue=Object.defineProperty,q=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,ee=(e,t,s)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ne=(e,t)=>{for(var s in t||(t={}))me.call(t,s)&&ee(e,s,t[s]);if(q)for(var s of q(t))Re.call(t,s)&&ee(e,s,t[s]);return e};const te=_.isMobile(),O=S({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),fe={state:O,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=j.state;if(e==="NONE"||t==="ALL"&&!e)return O.recomendedWallets;if(_.isArray(e)){const s={recommendedIds:e.join(",")},{listings:o}=await g.getAllListings(s),l=Object.values(o);l.sort((I,T)=>{const d=e.indexOf(I.id),U=e.indexOf(T.id);return d-U}),O.recomendedWallets=l}else{const{chains:s,isAuth:o}=N.state,l=s?.join(","),I=_.isArray(t),T={page:1,sdks:o?"auth_v1":void 0,entries:_.RECOMMENDED_WALLET_AMOUNT,chains:l,version:2,excludedIds:I?t.join(","):void 0},{listings:d}=te?await g.getMobileListings(T):await g.getDesktopListings(T);O.recomendedWallets=Object.values(d)}return O.recomendedWallets},async getWallets(e){const t=Ne({},e),{explorerRecommendedWalletIds:s,explorerExcludedWalletIds:o}=j.state,{recomendedWallets:l}=O;if(o==="ALL")return O.wallets;l.length?t.excludedIds=l.map(V=>V.id).join(","):_.isArray(s)&&(t.excludedIds=s.join(",")),_.isArray(o)&&(t.excludedIds=[t.excludedIds,o].filter(Boolean).join(",")),N.state.isAuth&&(t.sdks="auth_v1");const{page:I,search:T}=e,{listings:d,total:U}=te?await g.getMobileListings(t):await g.getDesktopListings(t),n=Object.values(d),h=T?"search":"wallets";return O[h]={listings:[...O[h].listings,...n],total:U,page:I??1},{listings:n,total:U}},getWalletImageUrl(e){return g.getWalletImageUrl(e)},getAssetImageUrl(e){return g.getAssetImageUrl(e)},resetSearch(){O.search={listings:[],total:0,page:1}}},L=S({open:!1}),H={state:L,subscribe(e){return Y(L,()=>e(L))},async open(e){return new Promise(t=>{const{isUiLoaded:s,isDataLoaded:o}=N.state;if(N.setWalletConnectUri(e?.uri),N.setChains(e?.chains),oe.reset("ConnectWallet"),s&&o)L.open=!0,t();else{const l=setInterval(()=>{const I=N.state;I.isUiLoaded&&I.isDataLoaded&&(clearInterval(l),L.open=!0,t())},200)}})},close(){L.open=!1}};var Ve=Object.defineProperty,se=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,ne=(e,t,s)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ae=(e,t)=>{for(var s in t||(t={}))be.call(t,s)&&ne(e,s,t[s]);if(se)for(var s of se(t))Oe.call(t,s)&&ne(e,s,t[s]);return e};function Ue(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const w=S({themeMode:Ue()?"dark":"light"}),ie={state:w,subscribe(e){return Y(w,()=>e(w))},setThemeConfig(e){const{themeMode:t,themeVariables:s}=e;t&&(w.themeMode=t),s&&(w.themeVariables=Ae({},s))}},y=S({open:!1,message:"",variant:"success"}),ge={state:y,subscribe(e){return Y(y,()=>e(y))},openToast(e,t){y.open=!0,y.message=e,y.variant=t},closeToast(){y.open=!1}};class We{constructor(t){this.openModal=H.open,this.closeModal=H.close,this.subscribeModal=H.subscribe,this.setTheme=ie.setThemeConfig,ie.setThemeConfig(t),j.setConfig(t),this.initUi()}async initUi(){if(typeof window<"u"){await le(()=>import("./index.090263d2.js"),["./index.090263d2.js","./qrcode.9f6ec2cf.js","./index.9ce0a29e.js","./@vuelidate.e7200945.js","./google-spreadsheet.016741c3.js","./maci.f28b6353.js","./@kleros/gtcr-encoder.75dc8b9f.js","./index.89b27c2a.css"],import.meta.url);const t=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",t),N.setIsUiLoaded(!0)}}}const ye=Object.freeze(Object.defineProperty({__proto__:null,WalletConnectModal:We},Symbol.toStringTag,{value:"Module"}));export{H as F,ie as G,oe as N,ge as Q,he as T,ye as a,N as d,j as f,_ as i,fe as q};
